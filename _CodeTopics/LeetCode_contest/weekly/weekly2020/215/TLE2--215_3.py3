class Solution:
    def minOperations(self, nums: List[int], x: int) -> int:
        
        @lru_cache(None)
        def backtrack(currNums, currX, steps):
            if currX < 0:
                return
            elif currX == 0:
                res[0] = min(res[0], steps)
                return
            else:
                if not currNums:
                    return
                else:
                    backtrack(currNums[1:], currX-currNums[0], steps+1)
                    if len(currNums) > 1:
                        backtrack(currNums[:len(currNums)-1], currX-currNums[-1], steps+1)
        
        res = [float('inf')]
        backtrack(tuple(nums),x,0)
        if res[0] == float('inf'):
            return -1
        return res[0]
    
"""
https://leetcode-cn.com/submissions/detail/123536502/

45 / 86 个通过测试用例
状态：超出时间限制

最后执行的输入：
[3959,2920,7468,7715,7549,2053,696,904,3750,9217,6874,4358,8553,7365,3546,5582,7963,7086,9109,7153,5386,502,4935,2070,1802,975,3616,7604,3389,6520,3900,6241,9465,9567,4284,8433,8762,6256,7063,685,4046,2642,7641,7962,5185,4892,8230,3056,1907,5625,799,9541,4812,289,7834,8244,8786,206,9214,8990,2794,6543,6823,6886,5237,8938,241,4399,667,7837,8966,3088,7450,6210,3059,6606,2256,3183,5256,7001,1573,6117,2114,245,9110,7858,9159,2772,7695,5198,1096,9667,6207,8904,8581,6630,2872,5625,910,8826,8361,8394,5703,1250,6113,5631,8872,3775,7710,3879,1375,1043,3017,275,4068,87,7563,343,114,2066,3173,2996,3560,2410,7852,1884,452,6302,3993,3807,6476,3792,7656,2147,8256,8657,2892,5981,8937,4065,3303,4686,4357,8646,4333,4990,6993,4250,9026,5768,5550,3091,3890,7332,6851,8262,1191,2495,5960,8295,8550,4305,5270,4677,3949,5364,1374,2411,5357,9590,8762,7709,1593,5356,306,6211,336,3889,4221,5065,2620,678,9237,2382,7822,8265,9060,1629,5070,6622,1513,7911,2535,5693,3097,7507,5252,7973,5358,4946,4880,73,398,8920,7741,9101,2359,5363,6996,3995,1114,7040,5156,8701,1054,9514,4946,2521,9919,1828,7390,7884,7712,4981,8074,1585,5842,2808,618,6840,7067,7558,3871,6204,1177,5874,4058,9847,7224,9669,8767,3919,9665,6170,2091,7091,3112,440,8896,7703,1812,2979,2915,1096,5501,4455,3339,1257,5717,4390,4053,8546,1756,2049,2768,6496,743,3657,257,3236,2541,1090,8003,341,4470,7484,9121,322,1213,9809,4100,6925,3788,3111,7703,3878,9429,1694,7458,4715,35,4052,4632,9150,2924,5715,6100,1185,8762,3908,1035,1682,297,3243,9416,1022,9051,6381,3325,6003,5897,4415,8204,1093,772,6699,9605,4066,9715,8678,5784,7853,4862,1256,5506,7926,8633,7458,6353,2423,1969,8549,7304,4663,8730,9563,5064,2232,2957,7200,3394,2512,5320,6195,3117,7272,6625,7582,7532,7675,4797,4022,3289,4351,8759,1707,7967,2445,666,865,6323,2563,8146,4749,5822,2850,537,1997,896,9459,1779,9717,3628,3774,6554,277,8962,8390,7913,4026,3091,5880,914,4463,7142,9849,5313,5955,1775,1881,4925,9459,8876,6747,1242,9884,2800,3084,1708,7083,203,9384,743,6590,926,1267,847,7956,7909,1934,8430,5492,4086,1978,6206,4567,3890,6203,2380,3504,4889,8164,7375,2352,1006,1853,1129,1673,5669,5008,4930,9491,6250,8184,782,5555,559,4019,9489,7854,4998,9141,2051,8500,8042,245,2955,1703,3239,5541,5917,4813,5577,9516,5003,9081,2114,4950,5851,881,9764,1859,3239,6068,316,9956,9516,1365,5832,6104,1484,7276,666,5404,5565,874,8241,4930,2915,3568,188,5579,1595,8858,1677,4467,5605,9735,3797,1855,6893,7490,8518,687,7768,2427,5813,1822,3752,3076,8701,8797,5198,9653,5332,5790,8581,7413,1186,8660,3731,9394,8701,3739,3940,9516,7042,2958,4758,7447,3549,2731,6214,8098,8755,955,7055,867,1605,3617,3791,8809,2283,6565,505,9875,3590,7289,1020,8107,6481,1487,9730,9458,6977,6560,9265,5412,4366,5618,6347,3566,3316,4131,5792,1698,1145,3071,5043,1511,3221,2146,7,3401,585,1372,7858,344,7027,5235,1515,5217,8834,1840,6960,2172,899,1864,1068,4386,1240,1487,7336,9283,3188,4530,5410,796,7241,2705,9202,7340,7335,1028,9574,3752,9466,9246,2902,6135,1951,3288,9063,6880,970,9265,2877,4282,4168,6460,1313,1036,3137,1008,9733,4938,2862,8315,699,4179,4594,9418,5726,8845,1810,5786,88,4836,4830,8429,3023,3427,6851,7243,5178,2820,7863,6959,8630,2375,4016,1079,9848,4805,3089,9467,5645,2428,4453,6920,1199,2005,2811,2402,8620,485,2036,3836,8422,7941,5634,59,1532,146,9201,5125,7499,4376,518,747,7547,5653,5110,9517,2424,2964,3085,1828,1707,2389,3653,5814,5020,1647,5914,613,8382,3134,5559,9547,3766,7008,1540,9342,6203,8627,3651,3560,8032,6280,4506,2369,299,9176,4832,1432,7301,1395,4061,1981,2154,5583,4589,2263,6594,173,4453,5450,6559,549,1907,3330,6962,4967,3992,8495,4957,8988,7851,8684,8421,842,4882,3851,2106,8821,6173,7990,8075,8967,322,8092,3413,5908,8090,7454,5607,1607]
162890356
"""
