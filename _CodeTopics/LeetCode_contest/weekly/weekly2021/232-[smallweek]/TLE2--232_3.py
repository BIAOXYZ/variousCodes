class Solution(object):
    def maxAverageRatio(self, classes, extraStudents):
        """
        :type classes: List[List[int]]
        :type extraStudents: int
        :rtype: float
        """
        
        if len(classes) == 1:
            return (classes[0][0]+extraStudents)*1.0/(classes[0][1]+extraStudents)
        
        diff = [[(clas[0]+1)*1.0/(clas[1]+1) - clas[0]*1.0/clas[1], i] for i, clas in enumerate(classes)]
        diff.sort(reverse=True)
        for i in range(extraStudents):
            ind = diff[0][1]
            classes[ind][0] += 1
            classes[ind][1] += 1
            diff[0][0] = (classes[ind][0]+1)*1.0/(classes[ind][1]+1) - classes[ind][0]*1.0/classes[ind][1]
            if diff[0][0] > diff[1][0]:
                continue
            for j in range(2, len(diff)):
                tmpdiff = diff[0][:]
                if diff[j][0] > diff[0][0]:
                    continue
                else:
                    for k in range(j-1):
                        diff[k] = diff[k+1][:]
                    diff[j-1] = tmpdiff
                    break
        return sum([clas[0]*1.0/clas[1] for clas in classes]) / len(classes)
    
"""
https://leetcode-cn.com/submissions/detail/154959797/

59 / 84 个通过测试用例
状态：超出时间限制

最后执行的输入：
[[270,297],[819,918],[343,998],[153,266],[397,903],[453,690],[674,964],[853,910],[507,739],[173,917],[393,908],[41,95],[211,597],[953,995],[53,325],[536,764],[42,313],[426,815],[112,979],[633,642],[332,719],[133,944],[11,353],[248,640],[363,532],[445,961],[247,730],[86,533],[34,343],[20,669],[27,455],[173,914],[828,902],[288,764],[687,824],[632,850],[215,873],[440,812],[297,645],[45,169],[40,510],[400,892],[555,978],[701,930],[115,676],[295,390],[447,932],[52,235],[342,430],[590,602],[499,615],[209,594],[524,691],[92,345],[650,816],[415,887],[184,671],[800,967],[242,530],[855,971],[497,973],[74,888],[655,822],[430,695],[224,405],[262,797],[2,289],[34,267],[88,800],[185,634],[259,775],[460,711],[313,446],[103,305],[56,808],[180,489],[261,837],[214,562],[44,130],[409,690],[11,565],[516,581],[3,305],[391,745],[100,349],[166,263],[613,714],[75,205],[180,800],[697,719],[592,657],[387,544],[581,740],[24,226],[416,944],[19,699],[5,688],[426,541],[632,783],[818,989],[792,860],[55,180],[758,940],[406,799],[425,669],[163,196],[94,228],[463,627],[553,558],[343,873],[681,682],[197,257],[520,611],[262,841],[254,398],[300,688],[264,635],[915,996],[151,730],[648,730],[273,371],[593,743],[283,513],[225,657],[792,881],[194,550],[23,678],[108,224],[173,283],[330,756],[167,225],[661,670],[34,624],[225,398],[264,269],[218,651],[268,385],[43,787],[34,885],[158,737],[509,962],[309,448],[872,974],[376,416],[798,879],[365,633],[203,294],[287,937],[820,878],[271,495],[157,633],[595,804],[145,366],[63,400],[74,267],[78,794],[214,506],[465,885],[42,315],[276,346],[5,864],[705,850],[630,695],[508,804],[442,836],[893,930],[434,442],[376,773],[624,956],[498,738],[199,779],[443,760],[401,883],[297,911],[83,99],[745,980],[165,723],[346,936],[375,583],[440,723],[127,392],[860,895],[54,386],[445,623],[116,206],[235,880],[490,705],[178,393],[137,703],[226,635],[99,710],[331,356],[451,518],[789,830],[171,888],[388,646],[496,966],[577,984],[39,189],[204,516],[256,697],[135,782],[123,281],[967,996],[14,571],[6,381],[293,852],[220,853],[56,956],[320,673],[152,695],[69,131],[161,736],[429,604],[275,784],[134,830],[75,923],[198,945],[165,783],[427,617],[222,801],[403,555],[502,869],[178,618],[66,823],[249,511],[75,209],[156,699],[251,922],[194,625],[629,718],[151,983],[266,562],[67,990],[770,789],[588,875],[382,940],[81,365],[286,541],[184,673],[481,581],[444,803],[571,940],[590,728],[227,574],[130,950],[568,604],[121,815],[446,906],[439,760],[230,377],[455,692],[576,974],[341,402],[581,686],[54,188],[785,940],[50,377],[634,884],[166,475],[680,738],[478,587],[361,383],[160,469],[206,560],[489,549],[289,613],[131,214],[226,624],[109,290],[681,853],[91,672],[233,867],[435,525],[220,688],[308,858],[505,735],[64,385],[209,652],[55,716],[317,765],[307,637],[216,439],[13,777],[334,468],[250,430],[108,664],[173,518],[53,757],[392,970],[167,956],[18,855],[508,527],[497,950],[378,563],[437,879],[30,950],[609,661],[447,683],[399,986],[244,531],[9,574],[45,643],[864,989],[669,905],[205,663],[324,859],[37,1000],[868,934],[139,450],[720,862],[183,463],[148,150],[258,517],[392,709],[96,525],[73,127],[714,970],[393,859],[376,496],[39,216],[420,543],[226,987],[493,977],[173,203],[202,243],[543,684],[347,658],[306,713],[489,952],[846,860],[791,824],[589,628],[519,828],[241,778],[926,929],[219,289],[127,993],[584,789],[11,778],[38,639],[92,323],[541,813],[183,667],[468,554],[83,420],[144,739],[558,839],[45,811],[732,961],[144,932],[328,959],[684,955],[368,764],[463,766],[196,915],[410,475],[823,862],[88,880],[375,404],[11,292],[217,599],[365,384],[855,984],[8,641],[98,457],[816,863],[416,778],[315,717],[178,307],[753,990],[668,961],[225,763],[338,934],[217,341],[42,991],[53,983],[20,725],[187,616],[333,474],[731,990],[38,273],[608,817],[539,925],[279,912],[68,988],[656,736],[256,904],[886,933],[13,134],[424,770],[277,356],[828,905],[511,872],[40,396],[114,313],[430,709],[255,770],[235,531],[447,598],[271,581],[6,11],[156,826],[487,800],[726,783],[946,962],[153,949],[906,909],[80,359],[613,978],[866,951],[254,571],[660,892],[159,564],[136,411],[143,626],[712,750],[339,984],[133,199],[141,623],[705,907],[120,900],[131,794],[35,611],[280,285],[8,361],[149,921],[718,856],[9,66],[468,818],[734,965],[444,732],[317,408],[137,702],[402,437],[369,774],[459,803],[300,359],[487,906],[191,998],[9,276],[236,319],[712,870],[55,512],[62,803],[8,82],[475,609],[3,1000],[653,806],[136,252],[402,729],[753,825],[632,978],[228,398],[608,873],[633,865],[188,284],[224,741],[93,166],[907,925],[339,940],[89,356],[125,955],[823,917],[237,570],[210,337],[574,815],[459,550],[795,812],[85,723],[442,586],[365,966],[170,915],[186,633],[105,363],[190,880],[704,896],[506,948],[82,626],[442,468],[65,224],[70,682],[258,650],[337,402],[378,860],[335,596],[441,530],[614,636],[73,667],[195,915],[356,422],[540,755],[355,510],[123,710],[338,459],[9,231],[312,977],[421,685],[695,975],[144,197],[285,723],[522,631],[48,167],[594,864],[59,318],[114,677],[273,654],[115,604],[185,961],[656,724],[464,572],[584,931],[254,954],[442,480],[56,145],[505,825],[369,992],[299,516],[385,763],[92,925],[448,580],[133,702],[522,714],[239,439],[65,499],[605,741],[868,923],[371,545],[190,534],[64,724],[195,209],[20,356],[244,245],[540,727],[540,666],[421,572],[170,425],[241,804],[1,225],[523,967],[546,987],[59,672],[160,881],[93,562],[26,818],[146,558],[236,273],[341,370],[142,749],[97,262],[900,996],[365,423],[609,891],[44,562],[64,875],[470,690],[39,749],[323,652],[319,952],[308,692],[760,979],[400,884],[315,813],[395,495],[302,689],[123,600],[704,977],[12,667],[109,732],[76,435],[127,214],[10,646],[252,481],[73,936],[218,968],[350,992],[220,931],[293,304],[477,884],[477,714],[572,587]]
96785
"""
